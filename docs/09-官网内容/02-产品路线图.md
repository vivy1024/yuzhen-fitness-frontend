# 产品路线图

**状态**: 🔄 持续更新  
**版本**: v2.0.0  
**更新日期**: 2026-01-08  
**作者**: 薛小川

---

## 核心理念

> **便捷性 > AI对话**
> 
> AI对话不是可持续的收费点。真正的价值在于：**数据便捷性 + 工具实用性 + 低使用门槛 = 用户留存 + 付费意愿**

### 产品定位演进

```
阶段1：AI健身助手（当前）
  ↓
阶段2：离线可用的健身工具箱
  ↓
阶段3：智能健身Agent平台
  ↓
阶段4：开放的健身知识生态
```

---

## 当前版本 v1.x

### 核心功能（已上线）✅

#### 🤖 AI健身助手
- **13种DAG模板**：训练计划、动作替换、负重建议、营养指导等
- **个性化推荐**：基于用户档案（身高、体重、训练经验、伤病史）
- **安全优先**：禁忌症检查、损伤风险评估
- **流式响应**：实时生成，工具调用可视化

#### 💪 专业动作库
- **1,790个健身动作**：34字段完整数据
- **图片演示**：男女双视角（musclewiki来源，版权待解决）
- **智能筛选**：按肌肉群、器械类型、难度等级筛选

#### 🍎 营养数据库
- **1,880个食物数据**：35个营养字段
- **TDEE计算器**：免费功能
- **营养分析**：蛋白质、碳水、脂肪比例分析

#### 📊 数据存储
- **训练计划**：保存在 LocalStorage
- **用户档案**：保存在服务器
- **训练记录**：保存在服务器

### 当前架构问题

#### DAG模板的局限性
```
当前流程：
用户提问 → LLM选择DAG模板 → 程序固定执行 → 返回结果

问题：
❌ 13个DAG模板复杂，维护成本高
❌ 程序执行不能出错，修改DAG多次出问题
❌ 用户需求多样，固定模板难以覆盖
❌ 无法灵活组合工具
```

#### 数据依赖网络
```
当前状态：
❌ 动作库浏览需要联网
❌ 食物库浏览需要联网
❌ 训练计划生成需要联网
❌ 所有功能都依赖服务器
```

---

## 阶段1：本地缓存 + 离线可用（v2.0）

**目标**：让用户在没有网络时也能使用核心功能  
**时间**：2026年1-2月  
**优先级**：P0（最高）

### 本地缓存架构

```
┌─────────────────────────────────────────────────────┐
│                    用户设备                          │
│  ┌─────────────────────────────────────────────┐   │
│  │           IndexedDB (Dexie.js)              │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────────┐   │   │
│  │  │ 动作库  │ │ 食物库  │ │ 训练计划    │   │   │
│  │  │ 1,790个 │ │ 1,880个 │ │ 用户自定义  │   │   │
│  │  │  ~5MB   │ │  ~3MB   │ │   ~100KB    │   │   │
│  │  └─────────┘ └─────────┘ └─────────────┘   │   │
│  └─────────────────────────────────────────────┘   │
│                        ↑                            │
│                   首次同步/增量更新                  │
└─────────────────────────────────────────────────────┘
```

### 功能清单

| 功能 | 离线可用 | 实现方式 |
|------|---------|---------|
| 动作库浏览 | ✅ | IndexedDB缓存 |
| 动作搜索/筛选 | ✅ | 本地查询 |
| 食物库浏览 | ✅ | IndexedDB缓存 |
| 食物搜索/筛选 | ✅ | 本地查询 |
| 训练计划查看 | ✅ | LocalStorage |
| 训练计划编辑 | ✅ | 本地修改 |
| 训练记录 | ✅ | 本地保存，联网同步 |
| TDEE计算 | ✅ | 纯前端计算 |
| AI对话 | ❌ | 需要联网 |

### 用户体验

```
首次打开App：
  → 后台下载数据包（~10MB）
  → 显示下载进度
  → 完成后提示"已可离线使用"

日常使用：
  → 浏览动作库：本地数据，秒开
  → 浏览食物库：本地数据，秒开
  → 查看训练计划：本地数据
  → AI对话：需要联网（显示提示）

数据更新：
  → 每周检查一次更新
  → 增量更新，只下载变化的数据
  → 用户可手动触发更新
```

### 技术实现

```typescript
// 使用 Dexie.js 管理 IndexedDB
import Dexie from 'dexie'

const db = new Dexie('YuzhenFitnessDB')
db.version(1).stores({
  exercises: 'id, name_zh, primary_muscle_zh, equipment_zh',
  foods: 'id, name, category',
  trainingPlans: 'id, name, createdAt',
  trainingRecords: 'id, date, planId'
})

// 首次同步
async function syncData() {
  const exercises = await api.getExercises()
  await db.exercises.bulkPut(exercises)
}

// 离线查询
async function searchExercises(keyword: string) {
  return db.exercises
    .where('name_zh')
    .startsWithIgnoreCase(keyword)
    .toArray()
}
```

---

## 阶段2：训练计划本地化 + 用户可编辑（v2.5）

**目标**：训练计划完全本地化，用户可自由编辑  
**时间**：2026年3-4月  
**优先级**：P0

### 训练计划架构

```
┌─────────────────────────────────────────────────────┐
│                  训练计划管理                        │
│                                                     │
│  创建方式：                                         │
│  ├─ AI生成（需联网）                               │
│  ├─ 从模板创建（离线）                             │
│  └─ 手动创建（离线）                               │
│                                                     │
│  编辑方式：                                         │
│  ├─ 手动编辑（从动作库选择替换）                   │
│  ├─ AI编辑（"把深蹲换成腿举"）                     │
│  └─ 复制/修改现有计划                              │
│                                                     │
│  存储位置：IndexedDB（本地）                        │
│  同步策略：联网时自动同步到云端备份                 │
└─────────────────────────────────────────────────────┘
```

### 用户编辑训练计划

```
场景1：手动编辑
  用户打开训练计划
  → 点击某个动作
  → 选择"替换动作"
  → 从动作库选择新动作（本地数据）
  → 保存

场景2：AI编辑（需联网）
  用户说："把第二天的深蹲换成腿举，我膝盖不舒服"
  → AI理解意图
  → 调用工具修改计划
  → 返回修改后的计划
  → 用户确认保存
```

### 计划模板库

提供预设的训练计划模板，用户可离线使用：

| 模板名称 | 适合人群 | 训练频率 |
|---------|---------|---------|
| 新手全身训练 | 初学者 | 3天/周 |
| 上下肢分化 | 中级 | 4天/周 |
| PPL分化 | 中高级 | 6天/周 |
| 胸背腿分化 | 中高级 | 5天/周 |
| 居家徒手训练 | 无器械 | 4天/周 |

---

## 阶段3：Agent模式 + DAG模板淘汰（v3.0）

**目标**：用Agent模式替代固定DAG模板  
**时间**：2026年5-6月  
**优先级**：P1

### 架构演进

```
当前架构（DAG模板）：
┌─────────────────────────────────────────────────────┐
│  用户提问 → LLM选择模板 → 程序执行DAG → 返回结果   │
│                                                     │
│  问题：                                             │
│  ❌ 13个DAG模板复杂，维护成本高                    │
│  ❌ 程序执行不能出错，修改多次出问题               │
│  ❌ 固定流程，无法灵活应对用户需求                 │
└─────────────────────────────────────────────────────┘
                         ↓
目标架构（Agent模式）：
┌─────────────────────────────────────────────────────┐
│  用户提问 → LLM自主决策 → 动态调用工具 → 返回结果   │
│                                                     │
│  优势：                                             │
│  ✅ 无需维护DAG模板                                │
│  ✅ LLM灵活组合工具                                │
│  ✅ 支持多轮交互和计划修改                         │
│  ✅ 更自然的对话体验                               │
└─────────────────────────────────────────────────────┘
```

### Agent模式设计

```
Agent核心能力：
├─ 理解用户意图
├─ 自主选择工具（18个MCP工具）
├─ 动态组合工具调用
├─ 多轮对话记忆
├─ 修改已有计划
└─ 解释推理过程

工具分类：
├─ 查询类：动作查询、食物查询、用户档案查询
├─ 计算类：TDEE计算、负重计算、训练量计算
├─ 生成类：训练计划生成、膳食计划生成
├─ 检查类：禁忌症检查、风险评估
└─ 修改类：计划修改、动作替换
```

### 迁移策略

| 阶段 | 模式 | 说明 |
|------|------|------|
| v1.x | 纯DAG模板 | 当前状态 |
| v2.x | DAG + 简单Agent | 简单问题用Agent，复杂问题用DAG |
| v3.0 | 纯Agent模式 | 完全淘汰DAG模板 |

### 会员体系

| 功能 | 免费版 | 暖心会员(¥6/月) | 能量会员(¥29.9/月) |
|------|--------|----------------|-------------------|
| 动作库（离线） | ✅ 全部 | ✅ 全部 | ✅ 全部 |
| 食物库（离线） | ✅ 全部 | ✅ 全部 | ✅ 全部 |
| 训练计划 | 3个 | 10个 | 无限 |
| 计划手动编辑 | ✅ | ✅ | ✅ |
| AI对话 | 2次/天 | 5次/天 | 无限 |
| AI编辑计划 | ❌ | ✅ | ✅ |
| Agent模式 | ❌ | ❌ | ✅ |
| 数据导出 | ❌ | ✅ | ✅ |

---

## 阶段4：乐刻合作 + 自有视频（v3.5）

**目标**：解决动作视频版权问题，拓展B端市场  
**时间**：2026年7-12月  
**优先级**：P1

### 版权问题现状

| 数据 | 来源 | 版权状态 | 解决方案 |
|------|------|---------|---------|
| 动作数据 | musclewiki | ⚠️ 数据可用 | 保留 |
| 动作图片 | musclewiki | ❌ 不能商用 | 需替换 |
| 动作视频 | 无 | - | 需拍摄 |
| 食物数据 | 公开数据 | ✅ 可用 | 保留 |
| 食物图片 | 无 | - | AI生成/图库 |

### 乐刻合作方案

**第一阶段：核心700个动作**
- 乐刻提供：场地、教练、器械
- 我提供：拍摄设备、后期制作
- 版权：双方共有
- 费用：我承担（~8,000元）
- 时间：1-2个月

**第二阶段：补充900个动作**
- 根据第一阶段用户数据决定
- 优先拍摄高频使用的动作

**B端合作模式**
- 试点期：免费提供AI教练服务（3个月）
- 正式合作：2万元/年/店
- 独家授权：可谈

### 营养库图片

- 使用免费图库（Unsplash、Pexels）
- 或AI生成（成本低，版权清晰）
- 优先级低于动作视频

---

## 阶段5：健身知识库开放（v4.0）

**目标**：开放知识图谱，建立健身知识生态  
**时间**：2027年+  
**优先级**：P2

### 知识图谱可视化

```
┌─────────────────────────────────────────────────────┐
│                  健身知识图谱                        │
│                                                     │
│    [胸肌] ──训练──→ [卧推]                         │
│      │                 │                           │
│    协同肌群          替代动作                       │
│      ↓                 ↓                           │
│   [三头肌]          [哑铃飞鸟]                     │
│      │                 │                           │
│    训练动作          目标肌群                       │
│      ↓                 ↓                           │
│   [窄距卧推]        [胸肌中缝]                     │
│                                                     │
│  用户可以：                                         │
│  ├─ 点击节点查看详情                               │
│  ├─ 探索关系（"胸肌还能怎么练"）                   │
│  ├─ 搜索知识（"蛋白质摄入量"）                     │
│  └─ 收藏知识点                                     │
└─────────────────────────────────────────────────────┘
```

### 知识库内容

| 类别 | 内容 | 来源 |
|------|------|------|
| 运动学知识 | 肌肉解剖、动作原理 | 专业教材 |
| 营养学知识 | 营养素、饮食原则 | 专业教材 |
| 训练方法 | 训练原则、周期化 | 专业教材 |
| 研究论文 | 最新研究成果 | 学术期刊 |
| 用户贡献 | 训练心得、计划模板 | UGC |

---

## 里程碑总结

| 版本 | 时间 | 主题 | 核心功能 |
|------|------|------|---------|
| **v2.0** | 2026-02 | 离线可用 | 本地缓存、离线动作库/食物库 |
| **v2.5** | 2026-04 | 计划本地化 | 训练计划本地存储、用户可编辑 |
| **v3.0** | 2026-06 | Agent模式 | 淘汰DAG模板、LLM自主决策 |
| **v3.5** | 2026-12 | 自有内容 | 乐刻合作、自有视频上线 |
| **v4.0** | 2027+ | 知识生态 | 知识图谱开放、社区内容 |

---

## 收费策略

### 核心原则

```
免费版足够好用 → 付费解锁便捷性 → 高级用户付费解锁深度功能
```

### 功能对比

| 功能 | 免费版 | 暖心会员(¥6/月) | 能量会员(¥29.9/月) |
|------|--------|----------------|-------------------|
| **数据访问** | | | |
| 动作库浏览（离线） | ✅ 全部 | ✅ 全部 | ✅ 全部 |
| 食物库浏览（离线） | ✅ 全部 | ✅ 全部 | ✅ 全部 |
| TDEE计算 | ✅ | ✅ | ✅ |
| **训练计划** | | | |
| 计划数量 | 3个 | 10个 | 无限 |
| 手动编辑 | ✅ | ✅ | ✅ |
| 从模板创建 | ✅ | ✅ | ✅ |
| **AI功能** | | | |
| AI对话次数 | 2次/天 | 5次/天 | 无限 |
| AI生成计划 | ✅ | ✅ | ✅ |
| AI编辑计划 | ❌ | ✅ | ✅ |
| Agent模式 | ❌ | ❌ | ✅ |
| **其他** | | | |
| 数据导出 | ❌ | ✅ | ✅ |
| 云端备份 | ❌ | ✅ | ✅ |
| 优先客服 | ❌ | ❌ | ✅ |

---

## 用户反馈

我们重视每一位用户的反馈：

- 📧 **邮箱**：1336495069@qq.com
- 💬 **微信**：xxc1765563156
- 🐛 **应用内反馈**：帮助中心 → 意见反馈

**你的反馈将直接影响产品路线图的优先级！**

---

**维护者**: 薛小川  
**最后更新**: 2026-01-08
