# 02-核心架构

本目录包含前端项目的核心架构设计文档，详细说明系统的设计理念和技术选型。

---

## 📚 文档列表

### [01-系统架构](./01-系统架构/)
- **系统架构总览**: 前端整体架构、分层设计
- **技术栈选型**: 为什么选择Vue 3、TypeScript、Vite
- **目录结构设计**: 项目目录组织原则

### [02-状态管理](./02-状态管理/)
- **Pinia架构**: Store设计模式、模块划分
- **数据流设计**: 单向数据流、状态同步
- **持久化方案**: LocalStorage、IndexedDB

### [03-路由系统](./03-路由系统/)
- **路由配置**: 路由表设计、懒加载
- **路由守卫**: 认证守卫、权限控制
- **页面切换**: 过渡动画、加载状态

### [04-组件系统](./04-组件系统/)
- **组件分类**: 基础组件、业务组件、页面组件
- **设计规范**: 命名规范、Props设计、事件设计
- **shadcn-vue集成**: 组件库使用、主题定制

### [05-API层](./05-API层/)
- **API模块设计**: 模块划分、接口封装
- **请求拦截器**: 认证、错误处理、重试
- **响应处理**: 数据转换、错误提示

---

## 🎯 架构原则

### 1. 分层架构

```
┌─────────────────────────────────┐
│         视图层 (Views)           │  页面组件
├─────────────────────────────────┤
│        组件层 (Components)       │  可复用组件
├─────────────────────────────────┤
│      状态管理层 (Stores)         │  Pinia Store
├─────────────────────────────────┤
│        API层 (API)              │  HTTP请求封装
├─────────────────────────────────┤
│       工具层 (Utils)            │  工具函数、常量
└─────────────────────────────────┘
```

### 2. 单向数据流

```
用户操作 → Action → API请求 → 更新State → 视图更新
```

### 3. 组件化开发

- **原子化**: 组件尽可能小而专注
- **可复用**: 通过Props和Slots提高复用性
- **可组合**: 使用Composables提取逻辑

### 4. 类型安全

- **TypeScript**: 全面使用TypeScript
- **类型推导**: 充分利用类型推导
- **接口定义**: 为API响应定义接口

---

## 🔧 技术选型

### 核心框架

| 技术 | 版本 | 选择理由 |
|------|------|----------|
| Vue 3 | 3.4+ | Composition API、性能优秀、生态成熟 |
| TypeScript | 5.3+ | 类型安全、IDE支持好、代码质量高 |
| Vite | 5.0+ | 快速启动、HMR、现代化构建 |

### 状态管理

| 技术 | 版本 | 选择理由 |
|------|------|----------|
| Pinia | 2.1+ | 官方推荐、TypeScript友好、轻量级 |

### UI框架

| 技术 | 版本 | 选择理由 |
|------|------|----------|
| shadcn-vue | 1.4+ | 无样式组件、可定制、Radix UI |
| Tailwind CSS | 3.4+ | 原子化CSS、快速开发、可维护 |

### 路由和请求

| 技术 | 版本 | 选择理由 |
|------|------|----------|
| Vue Router | 4.2+ | 官方路由、功能完善 |
| Axios | 1.6+ | 拦截器、取消请求、易用 |

---

## 📊 架构图

### 整体架构

```
┌──────────────────────────────────────────────┐
│                   用户界面                    │
│  ┌────────┐  ┌────────┐  ┌────────┐         │
│  │ 聊天页 │  │ 训练页 │  │ 个人页 │  ...    │
│  └────────┘  └────────┘  └────────┘         │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│                 组件层                        │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │ 聊天组件 │  │ 训练组件 │  │ UI组件   │  │
│  └──────────┘  └──────────┘  └──────────┘  │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│              状态管理 (Pinia)                 │
│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐   │
│  │ Chat │  │Topic │  │ Auth │  │Stream│   │
│  └──────┘  └──────┘  └──────┘  └──────┘   │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│                  API层                        │
│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐   │
│  │ Chat │  │Topic │  │ Auth │  │ Plan │   │
│  └──────┘  └──────┘  └──────┘  └──────┘   │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│                后端服务                       │
│  ┌──────────────┐  ┌──────────────┐        │
│  │ Laravel API  │  │ DAML-RAG API │        │
│  │ (Port 8000)  │  │ (Port 8001)  │        │
│  └──────────────┘  └──────────────┘        │
└──────────────────────────────────────────────┘
```

---

## 🔗 相关文档

- [系统架构总览](./01-系统架构/01-系统架构总览.md)
- [技术栈选型](./01-系统架构/02-技术栈选型.md)
- [Pinia架构](./02-状态管理/01-Pinia架构.md)

---

**维护者**: 薛小川  
**最后更新**: 2025-01-02
