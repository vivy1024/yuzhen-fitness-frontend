# 会员系统配置开关说明（前端）

**版本**: v1.0.0  
**更新日期**: 2026-01-09  
**状态**: ✅ 已完成

---

## 功能概述

前端通过调用后端配置API，自动控制会员相关UI的显示/隐藏。

**核心原因**：
- 个人开发者没有企业资质，会员系统暂时禁用
- 前端根据后端配置自动隐藏会员购买入口
- 显示打赏支持区域替代会员购买

---

## 使用方式

### 在组件中使用

```typescript
import { useMembershipStore } from '@/stores/membership'

const membershipStore = useMembershipStore()

// 初始化（自动获取配置）
await membershipStore.init()

// 检查会员系统是否启用
if (membershipStore.isSystemEnabled) {
  // 显示会员相关功能
}

// 检查是否显示会员中心
if (membershipStore.showMembershipCenter) {
  // 显示会员中心入口
}

// 检查是否显示打赏区域
if (membershipStore.showDonationSection) {
  // 显示打赏支持区域
}

// 获取用户限制
const aiLimit = membershipStore.dailyAiQueryLimit  // 10
const planLimit = membershipStore.maxTrainingPlans // 5
```

---

## 可用状态和计算属性

### 配置状态

| 属性 | 类型 | 说明 |
|------|------|------|
| `systemConfig` | `MembershipConfig` | 完整配置对象 |
| `configLoaded` | `boolean` | 配置是否已加载 |

### 计算属性

| 属性 | 类型 | 说明 |
|------|------|------|
| `isSystemEnabled` | `boolean` | 会员系统是否启用 |
| `showMembershipCenter` | `boolean` | 是否显示会员中心 |
| `showPurchaseButton` | `boolean` | 是否显示购买按钮 |
| `showDonationSection` | `boolean` | 是否显示打赏区域 |
| `unifiedLimits` | `object` | 统一用户限制 |
| `systemMessage` | `string` | 系统提示消息 |
| `dailyAiQueryLimit` | `number` | 每日AI对话限制 |
| `maxTrainingPlans` | `number` | 最大训练计划数 |

---

## 相关文件

| 文件 | 说明 |
|------|------|
| `src/api/membership.ts` | API定义（含 `getMembershipConfig`） |
| `src/stores/membership.ts` | Pinia Store（含配置状态） |

---

## 统一用户限制

会员系统禁用时，所有用户使用以下限制：

| 功能 | 限制 |
|------|------|
| AI对话 | 每天10次 |
| 训练计划 | 最多5个 |
| DAG模板 | 全部13个开放 |

---

## UI 控制逻辑

```vue
<template>
  <!-- 会员中心入口（仅会员系统启用时显示） -->
  <router-link v-if="membershipStore.showMembershipCenter" to="/membership">
    会员中心
  </router-link>
  
  <!-- 打赏支持区域（会员系统禁用时显示） -->
  <DonationSection v-if="membershipStore.showDonationSection" />
  
  <!-- 使用限制提示 -->
  <p>每日AI对话次数: {{ membershipStore.dailyAiQueryLimit }}</p>
</template>
```

---

**维护者**: 薛小川  
**联系方式**: 1336495069@qq.com
